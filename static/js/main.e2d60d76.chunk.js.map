{"version":3,"sources":["api/PredictionResponse.ts","api/FetchProxy.ts","api/BusTrackerApi.ts","api/TrainApi.ts","components/BusArrivalRow.tsx","components/Arrivals.tsx","api/WeatherResponse.ts","api/WeatherApi.ts","components/WeatherRow.tsx","components/Weather.tsx","components/Dashboard.tsx","App.js","serviceWorker.js","index.js"],"names":["PredictionLine","PredictionResponse","stopName","destination","line","prediction","Object","classCallCheck","this","StopName","Destination","Line","Prediction","FetchProxy","url","fetch","credentials","headers","accept","accept-language","cache-control","pragma","sec-fetch-mode","x-requested-with","sec-fetch-site","referrerPolicy","body","method","mode","BusTrackerApi","busStopIds","Promise","resolve","idsString","join","concat","fetchViaProxy","then","response","json","Array","forEach","push","Bus","parseInt","_unused","reject","catch","e","TrainApi","trainStopIds","mins","Date","parse","Unknown","Purple","Brown","Red","BusArrivalRow","props","predictionResponse","react_default","a","createElement","className","style","background","getcolor","Component","Arrivals","_this","possibleConstructorReturn","getPrototypeOf","call","timer","state","isFetching","predictionResponses","allResponseData","responseData","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","entries","Symbol","iterator","next","done","_ref","value","_ref2","slicedToArray","idx","BusArrivalRow_BusArrivalRow","key","err","return","allRespIdx","dataIndex","length","_this2","fetchData","setInterval","setState","objectSpread","all","getPredictions","resp","allData","sort","b","_this3","reason","console","log","WeatherResponse","forecasts","Forecasts","Forecast","timePeriodName","temperature","shortForecast","detailedForecast","iconUrl","TimePeriodName","Temperature","DetailedForecast","ShortForecast","IconUrl","WeatherApi","lotXValue","lotYValue","period","forecast","Number","parseFloat","WeatherRow","src","Weather","WeatherRow_WeatherRow","getWeather","Dashboard","transitionStates","arrivalsDataIndex","weatherDataIndex","transitionState","startsWith","Arrivals_Arrivals","Weather_Weather","newState","split","update","App","Dashboard_Dashboard","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e2d60d76.chunk.js","sourcesContent":["export default class PredictionResponse {\n    StopName: string;\n    Destination: string;\n    Line: PredictionLine;\n    Prediction: number | null;\n\n    constructor(stopName: string, destination: string, line: PredictionLine, prediction: number | null) {\n        this.StopName = stopName;\n        this.Destination = destination;\n        this.Line = line;\n        this.Prediction = prediction;\n    }\n}\n\n\nexport enum PredictionLine {\n    Unknown,\n    Purple,\n    Brown,\n    Red,\n    SeventyFour,\n    Bus\n}","export default class FetchProxy {\n    static fetchViaProxy(url: string): Promise<Response> {\n        return fetch('https://blooming-chamber-35209.herokuapp.com/' + url,\n            {\"credentials\": \"omit\",\n            \"headers\":\n                {\"accept\": \"*/*\",\n                 \"accept-language\": \"en-US,en;q=0.9\",\n                 \"cache-control\": \"no-cache\",\n                 \"pragma\":\"no-cache\",\n                 \"sec-fetch-mode\":\"cors\",\n                 \"x-requested-with\": \"XMLHttpRequest\",\n                 \"sec-fetch-site\":\"cross-site\"},\n            \"referrerPolicy\":\"no-referrer-when-downgrade\",\n            \"body\":null,\n            \"method\":\"GET\",\n            \"mode\":\"cors\"});\n    }\n}\n","import PredictionResponse, { PredictionLine } from './PredictionResponse';\nimport FetchProxy from './FetchProxy';\nimport { reject } from 'q';\n\nexport default class BusTrackerApi {\n    public static getPredictions(busStopIds: Array<number>) : Promise<Array<PredictionResponse>> {\n        return new Promise(resolve => {\n            let idsString: string = busStopIds.join(',');\n            let url: string = `http://www.ctabustracker.com/bustime/api/v2/getpredictions?key=nGRcA3p5MLFbSUrbDbtuKiiik&format=json&stpid=${idsString}`;\n            FetchProxy.fetchViaProxy(url)\n            .then(response => response.json())\n            .then(body => {\n                try {\n                    let response: Array<PredictionResponse> = new Array<PredictionResponse>();\n                    if ('prd' in body['bustime-response']) {\n                        body['bustime-response']['prd'].forEach((prediction: { [x: string]: string; }) => {\n                            response.push(new PredictionResponse(prediction['stpnm'], prediction['des'],\n                                PredictionLine.Bus, prediction['prdctdn'] !== 'DUE' ? parseInt(prediction['prdctdn']) : null))\n                        });\n                    }\n                    \n                    resolve(response);\n                }\n                catch {\n                    reject();\n                }\n                \n            }).catch(e => reject(e));\n        });\n    }\n}","import PredictionResponse, { PredictionLine } from './PredictionResponse';\nimport FetchProxy from './FetchProxy';\n\nexport default class TrainApi {\n    public static getPredictions(trainStopIds: Array<number>) : Promise<Array<PredictionResponse>> {\n        return new Promise(resolve => {\n            let idsString: string = trainStopIds.join(',');\n            let url: string = `https://lapi.transitchicago.com/api/1.0/ttarrivals.aspx?key=46c79bfa6f474db4a8d82638fc4584a7&outputType=JSON&stpid=${idsString}`;\n            FetchProxy.fetchViaProxy(url)\n            .then(response => response.json())\n            .then(body => {\n                let response: Array<PredictionResponse> = new Array<PredictionResponse>();\n                body['ctatt']['eta'].forEach((prediction: { [x: string]: string; }) => {\n                    let mins = (Date.parse(prediction['arrT']) - Date.parse(prediction['prdt'])) / (60 * 1000);\n                    let line = PredictionLine.Unknown;\n                    if (prediction['rt'] === 'P') {\n                        line = PredictionLine.Purple;\n                    }\n                    else if (prediction['rt'] === 'Brn') {\n                        line = PredictionLine.Brown;\n                    }\n                    else if (prediction['rt'] === 'Red') {\n                        line = PredictionLine.Red;\n                    }\n                    response.push(new PredictionResponse(prediction['staNm'], prediction['destNm'],\n                        line, mins));\n                    resolve(response);\n                });\n            });\n        });\n    }\n}","import React, { Component } from 'react';\nimport PredictionResponse, {PredictionLine} from '../api/PredictionResponse';\n\nexport default class BusArrivalRow extends Component<{predictionResponse: PredictionResponse}, {}> {\n    render() {\n        let mins = this.props.predictionResponse.Prediction !== null ? this.props.predictionResponse.Prediction : 'DUE';\n        return (\n            <div className=\"arrival\" style={{background: this.getcolor(this.props.predictionResponse.Line)}}>\n                <li className=\"arrival-detail arrival-destination\">{this.props.predictionResponse.Destination}</li> <li className=\"arrival-detail arrival-mins\">{mins}</li>\n            </div>\n        );\n    }\n\n    private getcolor(line: PredictionLine) {\n        switch (line) {\n            case PredictionLine.Purple:\n                return 'Purple';\n            case PredictionLine.Brown:\n                return 'Sienna';\n            case PredictionLine.Red:\n                return 'Crimson';\n            case PredictionLine.Bus:\n                return 'Gray';\n            default:\n                return 'Black';\n        }\n    }\n}","import React, { Component } from 'react';\nimport BusTrackerApi from '../api/BusTrackerApi';\nimport TrainApi from '../api/TrainApi';\nimport PredictionResponse from '../api/PredictionResponse';\nimport BusArrivalRow from './BusArrivalRow';\n\nexport default class Arrivals extends Component<{dataIndex: number}, {isFetching: boolean, predictionResponses: PredictionResponse[]}> {\n    timer: number;\n    constructor(props: any) {\n        super(props);\n        this.timer = 0;\n        this.state = {\n            isFetching: false,\n            predictionResponses: new Array<PredictionResponse>()\n        }\n    }\n\n    render() {\n        const allResponseData = new Array<Array<any>>();\n        let responseData = new Array<any>();\n        for (var [idx, response] of this.state.predictionResponses.entries()) {\n            if (idx % 4 === 0 && idx !== 0) {\n                allResponseData.push(responseData);\n                responseData = new Array<any>();\n            }\n            responseData.push(<BusArrivalRow key={idx} predictionResponse={response}></BusArrivalRow>)\n        };\n        const allRespIdx = this.props.dataIndex % allResponseData.length;\n        return (<ul className=\"arrivals-container\">{allResponseData[allRespIdx]}</ul>);\n    }\n\n    componentDidMount() {\n        this.fetchData();\n        this.timer = setInterval(() => this.fetchData(), 30 * 1000);\n    }\n\n    async fetchData() {\n        this.setState({...this.state, isFetching: true});\n        await Promise.all([\n            BusTrackerApi.getPredictions([1345, 1227]),\n            TrainApi.getPredictions([30233, 30236, 30235, 30234])\n        ]).then(resp => {\n            let allData = resp[0].concat(resp[1]);\n            allData.sort((a, b) => {\n                if (a.Prediction == null || b.Prediction == null || a.Prediction < b.Prediction) {\n                    return -1;\n                }\n                return 1;\n            });\n            this.setState({...this.state, isFetching: false, predictionResponses: allData});\n        }).catch(reason => {\n            console.log('Error fetching: ' + reason);\n            this.setState({...this.state, isFetching: false});\n        });        \n    }\n}","export default class WeatherResponse {\n    Forecasts: Array<Forecast>;\n\n    constructor(forecasts: Array<Forecast>,) {\n        this.Forecasts = forecasts;\n    }\n}\n\n\nexport class Forecast {\n    TimePeriodName: string;\n    Temperature: number;\n    DetailedForecast: string;\n    ShortForecast: string;\n    IconUrl: string;\n\n    constructor(timePeriodName: string, temperature: number, shortForecast: string, detailedForecast: string,\n        iconUrl: string) {\n        this.TimePeriodName = timePeriodName;\n        this.Temperature = temperature;\n        this.ShortForecast = shortForecast; \n        this.DetailedForecast = detailedForecast;\n        this.IconUrl = iconUrl;\n    }\n}","import WeatherResponse, { Forecast } from './WeatherResponse';\nimport FetchProxy from './FetchProxy';\n\nexport default class WeatherApi {\n    public static getWeather(lotXValue: number, lotYValue: number) : Promise<WeatherResponse> {\n        return new Promise(resolve => {\n            let idsString: string = lotXValue + ',' + lotYValue;\n            let url: string = `https://api.weather.gov/gridpoints/LOT/${idsString}/forecast`;\n            FetchProxy.fetchViaProxy(url)\n            .then(response => response.json())\n            .then(body => {\n                console.log(body);\n                let response = new Array<Forecast>();\n                body['properties']['periods'].forEach((period: { [x: string]: string; }) => {\n                    let forecast = new Forecast(period['name'], Number.parseFloat(period['temperature']),\n                    period['shortForecast'], period['detailedForecast'], period['icon'])\n                    response.push(forecast);\n                });\n                resolve(new WeatherResponse(response));\n            });\n        });\n    }\n}","import React, { Component } from 'react';\nimport { Forecast } from '../api/WeatherResponse';\n\nexport default class WeatherRow extends Component<{forecast: Forecast | null}, {}> {\n    render() {\n        console.log(this.props.forecast);\n        if (this.props.forecast !== null) {\n            return <div>\n                <div className=\"weather-header\">{this.props.forecast.TimePeriodName}</div>\n                <img className=\"weather-img\" src={this.props.forecast.IconUrl} />\n                <div className=\"weather-temp\">{this.props.forecast.Temperature + \"Â°F\"}</div>\n                <div className=\"weather-detailed\">{this.props.forecast.DetailedForecast}</div>\n            </div>;\n        }\n        return <div className=\"weather-header\">Missing Weather Data</div>;\n    }\n}","import React, { Component } from 'react';\nimport WeatherApi from '../api/WeatherApi';\nimport WeatherResponse, { Forecast } from '../api/WeatherResponse';\nimport WeatherRow from './WeatherRow';\n\nexport default class Weather extends Component<{dataIndex: number}, {isFetching: boolean, forecasts: Array<Forecast>}> {\n    timer: number;\n    constructor(props: any) {\n        super(props);\n        this.timer = 0;\n        this.state = {\n            isFetching: false,\n            forecasts: new Array<Forecast>()\n        }\n    }\n\n    render() {\n        return <WeatherRow forecast={this.state.forecasts.length > this.props.dataIndex ? this.state.forecasts[this.props.dataIndex] : null} />\n    }\n\n    componentDidMount() {\n        this.fetchData();\n        this.timer = setInterval(() => this.fetchData(), 30 * 1000);\n    }\n\n    async fetchData() {\n        this.setState({\n            isFetching: true\n        })\n        WeatherApi.getWeather(73, 70).then((response: WeatherResponse) => {\n            this.setState({forecasts: response.Forecasts});\n        });\n        this.setState({\n            isFetching: false\n        })\n    }\n}","import React, { Component } from 'react';\nimport Arrivals from './Arrivals';\nimport Weather from './Weather';\n\nexport default class Dashboard extends Component<{}, {arrivalsDataIndex: number, weatherDataIndex: number,transitionState: number}> {\n    timer: number;\n    transitionStates = ['Arrival0', 'Arrival1', 'Arrival2', 'Weather0', 'Weather1'];\n    constructor(props: any) {\n        super(props);\n        this.timer = 0;\n        this.state = {\n            arrivalsDataIndex: 0,\n            weatherDataIndex: 0,\n            transitionState: 0\n        }\n    }\n\n    render() {\n        let state = this.transitionStates[this.state.transitionState];\n        if (state.startsWith('Arrival')) {\n            return <Arrivals dataIndex={this.state.arrivalsDataIndex} />\n        }\n        else if (state === 'Weather0') {\n            return <Weather dataIndex={this.state.weatherDataIndex}/>\n        }\n        return null;\n    }\n\n    update() {\n        let newState = this.transitionStates[(this.state.transitionState + 1) % this.transitionStates.length];\n        if (newState.startsWith('Arrival')) {\n            this.setState({\n                arrivalsDataIndex: Number.parseInt(newState.split('Arrival')[1]),\n                transitionState: (this.state.transitionState + 1) % this.transitionStates.length\n            });\n        }\n        if (newState.startsWith('Weather')) {\n            this.setState({\n                weatherDataIndex: Number.parseInt(newState.split('Weather')[1]),\n                transitionState: (this.state.transitionState + 1) % this.transitionStates.length\n            });\n        }\n        else {\n            this.setState({\n                transitionState: (this.state.transitionState + 1) % this.transitionStates.length\n            });\n        }\n    }\n\n    componentDidMount() {\n        this.timer = setInterval(() => this.update(), 10 * 1000);\n    }\n}\n","import React from 'react';\nimport './App.css';\nimport Dashboard from './components/Dashboard';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <Dashboard />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}